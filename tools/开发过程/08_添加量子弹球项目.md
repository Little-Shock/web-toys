# 添加量子弹球项目

## 目标

创建一个新的网页玩具"量子弹球"，这是一个物理模拟的弹球游戏，允许用户上传自定义图片作为弹球，并能创建各种障碍物和特殊区域。该项目专为二次元爱好者设计，让他们可以使用自己喜欢的角色作为弹球，同时提供丰富的交互体验和音效反馈。

## 功能特点

1. **自定义弹球图像**：
   - 上传任意图片作为弹球
   - 自动裁剪为圆形并添加边缘效果
   - 支持随时更换弹球图像

2. **物理模拟**：
   - 基于Matter.js物理引擎
   - 真实的重力、弹性和摩擦力模拟
   - 可调节的物理参数

3. **障碍物创建**：
   - 墙壁：绘制任意形状的墙壁
   - 弹射器：高弹性的圆形障碍物
   - 重力井：吸引或排斥弹球的区域
   - 传送门：将弹球传送到另一位置
   - 橡皮擦：删除已创建的障碍物

4. **交互体验**：
   - 绘制模式和游戏模式切换
   - 多点触控支持
   - 直观的控制面板
   - 响应式设计，适配移动端和桌面端

5. **音效反馈**：
   - 不同类型碰撞的独特音效
   - 空间音频（根据碰撞位置调整声像）
   - 基于碰撞强度的动态音效
   - 可调节音量和开关音效

## 技术实现

1. **物理引擎**：
   - 使用Matter.js进行物理模拟
   - 自定义碰撞检测和处理
   - 特殊效果（如重力井、传送门）的物理实现

2. **Canvas渲染**：
   - 使用Matter.js内置渲染器
   - 自定义渲染样式和效果
   - 优化渲染性能

3. **音频系统**：
   - 使用Web Audio API生成合成音效
   - 动态音效参数调整
   - 空间音频定位

4. **图像处理**：
   - Canvas实现圆形裁剪
   - 添加边缘高光效果
   - 动态纹理更新

5. **用户交互**：
   - 触摸和鼠标事件处理
   - 绘制工具实现
   - 参数控制界面

## 项目结构

```
量子弹球/
├── index.html          # 主HTML文件
├── css/
│   └── style.css       # 样式文件
├── js/
│   ├── matter.min.js   # 物理引擎库
│   ├── audio-manager.js # 音频管理器
│   ├── ball-manager.js # 弹球管理器
│   ├── obstacle-manager.js # 障碍物管理器
│   ├── game-engine.js  # 游戏引擎
│   └── main.js         # 主控制脚本
└── assets/
    ├── sounds/         # 音效资源目录
    └── images/         # 图像资源目录
```

## 开发步骤

1. 创建项目目录结构
2. 引入Matter.js物理引擎
3. 实现基础HTML布局和CSS样式
4. 开发游戏引擎，整合物理引擎和渲染器
5. 实现弹球管理器，支持自定义图像
6. 开发障碍物管理器，实现各种特殊效果
7. 实现音频管理器，创建合成音效
8. 开发用户交互界面和控制面板
9. 优化移动端体验
10. 添加返回主菜单链接
11. 更新主导航页面和README文档

## 部署说明

该项目作为整个web-toys集合的一部分，通过Cloudflare Pages部署。无需特殊配置，只需确保项目文件夹结构正确，并在主导航页面添加链接即可。

## 未来改进方向

1. 添加更多类型的障碍物和特殊效果
2. 实现关卡系统，预设不同的挑战场景
3. 添加多人模式，支持多个玩家同时操作
4. 实现弹球特殊能力（如分裂、加速等）
5. 优化物理性能，支持更多同时存在的弹球
6. 添加粒子效果，增强视觉体验
7. 实现保存/加载自定义场景的功能
